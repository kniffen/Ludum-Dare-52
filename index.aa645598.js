let e;var t;(t=e||(e={})).Wheat="wheat",t.Corn="corn",t.Carrot="carrot",t.Potato="potato",t.Beet="beet";const a={[e.Wheat]:{id:e.Wheat,name:"Wheat",amount:20},[e.Corn]:{id:e.Corn,name:"Corn",amount:30},[e.Carrot]:{id:e.Carrot,name:"Carrot",amount:5},[e.Potato]:{id:e.Potato,name:"Potato",amount:10},[e.Beet]:{id:e.Beet,name:"Beets",amount:5}};let o=a[e.Wheat];const r=()=>o,s=[],n=(e,t)=>{e.amount+=t,s.forEach((t=>t(e)))};var c=a;let d;var l;(l=d||(d={}))[l.Grass=0]="Grass",l[l.Wheat=1]="Wheat",l[l.Corn=2]="Corn",l[l.Carrot=3]="Carrot",l[l.Potato=4]="Potato",l[l.Beet=5]="Beet",l[l.CultivatedDirt=6]="CultivatedDirt";const i={[d.Grass]:{name:"Grass",seed:null,growRate:1e-4,background:"#43260f",stages:[{char:"░",color:"#435313"},{char:"░",color:"#7dc85a"},{char:"▒",color:"#7dc85a"},{char:"▓",color:"#7dc85a"}]},[d.Wheat]:{name:"Wheat",seed:c[e.Wheat],growRate:2e-4,background:"#43260f",stages:[{char:"░",color:"#adbc10"},{char:"▒",color:"#cac712"},{char:"▓",color:"#ece822"}]},[d.Corn]:{name:"Corn",seed:c[e.Corn],growRate:5e-4,background:"#43260f",stages:[{char:"░",color:"#5c7a0b"},{char:"░",color:"#8d8d0c"},{char:"░",color:"#ccdd13"}]},[d.Carrot]:{name:"Carrot",seed:c[e.Carrot],growRate:8e-4,background:"#43260f",stages:[{char:"░",color:"#0b7a23"},{char:"▒",color:"#eb8f1e"}]},[d.Potato]:{name:"Potato",seed:c[e.Potato],growRate:.001,background:"#43260f",stages:[{char:"░",color:"#adbc10"},{char:"▒",color:"#adbc10"}]},[d.Beet]:{name:"Beets",seed:c[e.Beet],growRate:5e-4,background:"#43260f",stages:[{char:"░",color:"#7b1c87"},{char:"░",color:"#b22424"}]},[d.CultivatedDirt]:{name:"Cultivated Dirt",seed:null,growRate:1,background:"#43260f",stages:[{char:"░",color:"#6e6e6e"}]}};var u=i;const m=(e,t=0)=>({...i[e],type:e,stage:t}),h=u[d.Grass],g=Array(15).fill(0).map((e=>Array(20).fill(0).map((e=>m(d.Grass,Math.floor(Math.random()*(h.stages.length-1+1)+1))))));var f={ref:g[0][0],column:0,row:0},v=g;let w;var C;(C=w||(w={}))[C.Mower=0]="Mower",C[C.Cultivator=1]="Cultivator",C[C.Hoe=2]="Hoe",C[C.Sickle=3]="Sickle",C[C.SeedBag=4]="SeedBag";var b=[{id:w.Mower,char:"L",name:"Lawnmower",usedOn:[d.Grass]},{id:w.Cultivator,char:"w",name:"Cultivator",usedOn:Object.keys(d).map((e=>Number(e)))},{id:w.Hoe,char:"7",name:"Hoe",usedOn:[d.Carrot,d.Potato,d.Beet]},{id:w.Sickle,char:"J",name:"Sickle",usedOn:[d.Wheat,d.Corn]},{id:w.SeedBag,char:"u",name:"Seed bag",usedOn:[d.CultivatedDirt]}];const k=document.querySelector(".info");const p=document.getElementById("canvas"),B=p.getContext("2d"),E=Math.ceil(window.devicePixelRatio);if(!B)throw new Error("Unable to get canvas context");B.font="3rem Monospace";const x=B.measureText("#"),S=x.fontBoundingBoxAscent+x.fontBoundingBoxDescent+1,y=x.width,L=20*y,A=15*S,M=x.fontBoundingBoxAscent;function R(){if(B){B.clearRect(0,0,L,A),B.font="3rem Monospace";for(let e=0;e<15;e++)for(let t=0;t<20;t++){const a=v[e][t];B.fillStyle=a.background,B.fillRect(t*y,e*S,y,S);const o=Math.floor(a.stage);B.fillStyle=a.stages[o].color,B.fillText(a.stages[o].char,0+t*y,M+e*S)}B.strokeStyle="#FFFFFF",B.strokeRect(f.column*y,f.row*S,y,S)}}p.width=L*E,p.height=A*E,p.style.width=L+"px",p.style.height=A+"px",B.setTransform(E,0,0,E,0,0);const P=document.querySelector(".seed-selector"),T=document.createElement("h2"),W=e=>{T.innerText=`Seed: ${e.name} (${e.amount})`};var O;O=e=>{e.id===r().id&&W(e)},s.push(O),console.log(u);const F=Object.values(u).filter((e=>e.seed)).map((e=>{const t=document.createElement("div");return e.seed?(t.innerText=e.stages[e.stages.length-1].char,t.classList.add("seed"),t.setAttribute("title",e.seed.name),t.style.color=e.stages[e.stages.length-1].color,r().id===e.seed.id&&t.classList.add("selected"),t.addEventListener("click",(a=>{var r;e.seed&&(r=e.seed,o=r,W(e.seed),F.forEach((e=>e.classList.remove("selected"))),t.classList.add("selected"))})),t):t}));W(r()),P?.append(T,...F);const G={ref:b[0],isActive:!1,set:e=>b.find((t=>t.id===e)),use:()=>{if(!G.isActive)return;const{column:e,row:t}=f,a=v[t][e],o=r();var c,l;if(G.ref.usedOn.includes(a.type))switch(G.ref.id){case w.Mower:a.stage=0;break;case w.Cultivator:if(a.stage>=1)break;v[t][e]=m(d.CultivatedDirt);break;case w.SeedBag:if(o.amount<=0)break;const r=Object.entries(u).find((([e,t])=>t.seed?.id===o.id))?.[0];r&&(v[t][e]=m(Number(r)),l=1,(c=o).amount-=l,s.forEach((e=>e(c))));break;case w.Hoe:case w.Sickle:if(!a.seed||a.stage<a.stages.length-1)break;n(a.seed,2),v[t][e]=m(d.Grass)}}};var D=G;const $=document.querySelector(".tool-selector"),q=document.createElement("h2"),H=b.map((({id:e,char:t,name:a})=>{const o=document.createElement("div");return o.innerText=t,o.classList.add("tool"),o.setAttribute("title",a),D.ref.id===e&&o.classList.add("selected"),o.addEventListener("click",(t=>{const a=b.find((t=>t.id===e));a&&(D.ref=a,q.innerText=`Tool: ${a.name}`),H.forEach((e=>e.classList.remove("selected"))),o.classList.add("selected")})),o}));q.innerText=`Tool: ${D.ref.name}`,$?.append(q,...H);p.addEventListener("mousemove",(e=>{const t=Math.floor(e.offsetX/y),a=Math.floor(e.offsetY/S);f.column=t>0&&t<20?t:0,f.ref=v[f.row=a>0&&a<15?a:0][f.column],D.use()})),p.addEventListener("mousedown",(e=>{D.isActive=!0,D.use()})),p.addEventListener("mouseup",(e=>{D.isActive=!1})),p.addEventListener("mouseleave",(e=>{D.isActive=!1}));const j=e=>{k.innerText=`\n  Crop: ${f.ref.name}\n  Allowed tools: ${b.filter((e=>e.usedOn.includes(f.ref.type))).map((e=>e.name)).join(", ")}\n  Growth: ${((f.ref.stage+1)/f.ref.stages.length*100).toFixed()}%\n  `,v.forEach((e=>e.forEach((e=>{e.stage+=e.growRate,e.stage>e.stages.length-1&&(e.stage=e.stages.length-1)})))),R(),window.requestAnimationFrame(j)};window.requestAnimationFrame(j);
//# sourceMappingURL=index.aa645598.js.map
